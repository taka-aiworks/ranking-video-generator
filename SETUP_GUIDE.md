# 動画生成アプリ - セットアップガイド

## 📋 必要な環境

1. **Node.js** (v16以上推奨)
2. **VOICEVOX** アプリケーション
3. **インターネット接続** (初回セットアップ時)

## 🚀 初回セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. OpenAI APIキーの設定

1. `.env`ファイルを作成
2. 以下の内容を追加:

```
VITE_OPENAI_API_KEY=your_api_key_here
```

### 3. VoiceVOXのインストール

公式サイトからダウンロード: https://voicevox.hiroshiba.jp/

## 🎬 サーバーの起動

### 方法1: バッチファイルを使用（推奨）

`START_SERVERS.bat` をダブルクリックするだけで、すべてのサーバーが起動します。

### 方法2: 手動で起動

#### ターミナル1: Irasutoya画像サーバー
```bash
node server/index.js
```

#### ターミナル2: Vite開発サーバー
```bash
npm run dev
```

#### ターミナル3: VoiceVOX
- VoiceVOXアプリを起動してください

## 🌐 他のデバイスからアクセスする方法

### 1. PCのIPアドレスを確認

```bash
ipconfig
```

IPv4アドレスをメモ（例: `192.168.1.100`）

### 2. アプリケーションにアクセス

他のデバイスのブラウザで:
```
http://192.168.1.100:5173
```

### 3. VoiceVOX URLの設定

1. アプリケーションの「音声設定」セクション
2. 「URL設定」ボタンをクリック
3. `http://192.168.1.100:50021` を入力
4. ページを再読み込み

## ⚙️ サーバーの確認

### Irasutoya画像サーバー
- URL: http://localhost:3001
- 確認: http://localhost:3001/api/health

### Vite開発サーバー
- URL: http://localhost:5173
- 自動的にブラウザが開きます

### VoiceVOX API
- URL: http://localhost:50021
- 確認: http://localhost:50021/speakers

## 🔧 トラブルシューティング

### Irasutoya画像が読み込めない

1. サーバーが起動しているか確認
2. http://localhost:3001/api/health にアクセス
3. "サーバーが正常に動作しています" と表示されればOK

### VoiceVOXに接続できない

1. VoiceVOXアプリが起動しているか確認
2. アプリ内で「接続確認」ボタンをクリック
3. 他のデバイスからアクセスする場合は「URL設定」でIPアドレスを指定

### ポートが使用中のエラー

別のアプリケーションがポートを使用している可能性があります:

```bash
# ポート3001を使用しているプロセスを確認
netstat -ano | findstr :3001

# ポート50021を使用しているプロセスを確認
netstat -ano | findstr :50021
```

## 📝 使用方法

1. **キーワード入力**: 動画のテーマを入力
2. **フォーマット選択**: ショート動画 or 通常動画
3. **スクリプト生成**: AIが自動生成
4. **画像選択**: 自動選択された画像を確認・変更
5. **動画生成**: 動画ファイルをダウンロード

## 🎨 カスタマイズ

### 動画設定

- **動画時間**: 45-60秒（ショート動画推奨）
- **サイズ**: 1080×1920（縦型）
- **話者**: 四国めたん - ノーマル（デフォルト）

### 画像設定

- **自動選択**: スライドの内容に基づいて自動選択
- **手動変更**: 各スライドの「変更」ボタンで変更可能
- **アップロード**: カスタム画像のアップロードも可能

## 🐛 既知の問題

### VoiceVOXの外部アクセス

- VoiceVOXは標準では`127.0.0.1`でのみリッスンします
- 他のデバイスからアクセスするには、アプリ内で「URL設定」を使用してください

## 📞 サポート

問題が解決しない場合は、以下を確認してください:

1. Node.jsのバージョン: `node --version`
2. npm のバージョン: `npm --version`
3. VoiceVOXが起動しているか
4. ファイアウォールの設定

## 🔄 アップデート

```bash
# 最新のコードを取得
git pull origin main

# 依存関係を更新
npm install
```

